{"ast":null,"code":"import _slicedToArray from\"/home/jordi/Documentos/work/majo-floral-design/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{LinkContainer}from\"react-router-bootstrap\";import{Table,Button,Row,Col,Container,Form,FormControl}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../../components/Loader\";import Message from\"../../components/Message\";import Paginator from\"../../components/Paginator\";import ProductPanel from\"../../components/ProductPanel\";import{listProducts,registerProduct,deleteProduct}from\"../../actions/product_actions\";import{PRODUCT_REGISTER_RESET,PRODUCT_DELETE_RESET}from\"../../constants/product_contants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductListScreen(_ref){var history=_ref.history;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),actualPage=_useState2[0],setActualPage=_useState2[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var _useState3=useState(\"all\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var productRegister=useSelector(function(state){return state.productRegister;});var loadingCreate=productRegister.loading,successCreate=productRegister.success,productCreate=productRegister.product,errorCreate=productRegister.error;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,successDelete=productDelete.success,messageDelete=productDelete.message,errorDelete=productDelete.error;var productList=useSelector(function(state){return state.productList;});var loadingList=productList.loading,errorList=productList.error,products=productList.products,pages=productList.pages;useEffect(function(){dispatch({type:PRODUCT_REGISTER_RESET});dispatch({type:PRODUCT_DELETE_RESET});!userInfo?history.push(\"/\"):dispatch(listProducts(query,actualPage));successCreate&&history.push(\"/admin/productos/\".concat(productCreate._id,\"/editar/\"));},[dispatch,history,userInfo,successCreate,productCreate,successDelete,actualPage]);var createProductHandler=function createProductHandler(){dispatch(registerProduct());};var deleteProductHandler=function deleteProductHandler(id){window.confirm(\"¿Segur@ de querer eliminar este producto?\")&&dispatch(deleteProduct(id));};var submitHandler=function submitHandler(e){e.preventDefault();if(query==\"\"){setQuery(\"all\");dispatch(listProducts(\"all\",1));}else{dispatch(listProducts(query,1));}};return/*#__PURE__*/_jsx(Container,{style:{marginTop:\"15vh\"},children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(_Fragment,{children:[loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Productos\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"py-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Crear producto\"]})})]}),/*#__PURE__*/_jsx(Row,{className:\"mt-4 ml-1\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form,{inline:true,onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",placeholder:\"Buscar producto\",onChange:function onChange(e){return setQuery(e.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"outline-success\",children:\"Buscar\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{children:[loadingList?/*#__PURE__*/_jsx(Loader,{}):errorList?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorList}):/*#__PURE__*/_jsx(Row,{className:\"w-100 m-0\",children:products===null||products===void 0?void 0:products.map(function(product){return/*#__PURE__*/_jsx(Col,{xs:12,className:\"d-flex justify-content-center m-0\",children:/*#__PURE__*/_jsxs(ProductPanel,{product:product,children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/productos/\".concat(product._id,\"/editar/\"),children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"btn-sm mr-1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteProductHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})});})})// <Table striped bordered hover responsive className=\"table-sm mt-3\">\n//   <thead>\n//     <tr>\n//       <th>ID</th>\n//       <th>Nombre</th>\n//       <th>Precio</th>\n//       <th>Descripción</th>\n//       <th>¿Esta en stock?</th>\n//       <th>Categoría</th>\n//       <th></th>\n//     </tr>\n//   </thead>\n//   <tbody>\n//     {products?.map((product) => (\n//       <tr key={product._id}>\n//         <td>{product._id}</td>\n//         <td>{product.name}</td>\n//         <td>${product.price}</td>\n//         <td>{product.description.substr(0, 10)}</td>\n//         <td className=\"text-center\">\n//           {product.inStock == true ? (\n//             <i\n//               className=\"fas fa-check\"\n//               style={{ color: \"green\" }}\n//             ></i>\n//           ) : (\n//             <i className=\"fas fa-times-circle text-danger\"></i>\n//           )}\n//         </td>\n//         <td>{product.categorie[\"name\"]}</td>\n//         <td>\n// <LinkContainer\n//   to={`/admin/productos/${product._id}/editar/`}\n// >\n//   <Button variant=\"light\" className=\"btn-sm\">\n//     <i className=\"fas fa-edit\"></i>\n//   </Button>\n// </LinkContainer>\n// <Button\n//   variant=\"danger\"\n//   className=\"btn-sm\"\n//   onClick={() => deleteProductHandler(product._id)}\n// >\n//   <i className=\"fas fa-trash\"></i>\n// </Button>\n//         </td>\n//       </tr>\n//     ))}\n//   </tbody>\n// </Table>\n,/*#__PURE__*/_jsx(Paginator,{pages:pages,changePage:function changePage(value){return setActualPage(value);},pageToSearch:actualPage})]})]})});}","map":{"version":3,"sources":["/home/jordi/Documentos/work/majo-floral-design/frontend/src/views/ProductsListScreen/index.js"],"names":["React","useState","useEffect","LinkContainer","Table","Button","Row","Col","Container","Form","FormControl","useDispatch","useSelector","Loader","Message","Paginator","ProductPanel","listProducts","registerProduct","deleteProduct","PRODUCT_REGISTER_RESET","PRODUCT_DELETE_RESET","ProductListScreen","history","actualPage","setActualPage","dispatch","userLogin","state","userInfo","query","setQuery","productRegister","loadingCreate","loading","successCreate","success","productCreate","product","errorCreate","error","productDelete","loadingDelete","successDelete","messageDelete","message","errorDelete","productList","loadingList","errorList","products","pages","type","push","_id","createProductHandler","deleteProductHandler","id","window","confirm","submitHandler","e","preventDefault","marginTop","target","value","map"],"mappings":"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Ab,EADF,EAHF,EADF,cAQE,KAAC,MAAD,EACE,OAAO,CAAC,QADV,CAEE,SAAS,CAAC,QAFZ,CAGE,OAAO,CAAE,yBAAME,CAAAA,oBAAoB,CAAClB,OAAO,CAACgB,GAAT,CAA1B,EAHX,uBAKE,UAAG,SAAS,CAAC,cAAb,EALF,EARF,GADF,EADa,EAAd,CADH,EAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EJ,cA+EE,KAAC,SAAD,EACE,KAAK,CAAEH,KADT,CAEE,UAAU,CAAE,oBAACc,KAAD,QAAWxC,CAAAA,aAAa,CAACwC,KAAD,CAAxB,EAFd,CAGE,YAAY,CAAEzC,UAHhB,EA/EF,GA7BF,GADF,EADF,CAuHD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport {\n  Table,\n  Button,\n  Row,\n  Col,\n  Container,\n  Form,\n  FormControl,\n} from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../../components/Loader\";\nimport Message from \"../../components/Message\";\nimport Paginator from \"../../components/Paginator\";\nimport ProductPanel from \"../../components/ProductPanel\";\n\nimport {\n  listProducts,\n  registerProduct,\n  deleteProduct,\n} from \"../../actions/product_actions\";\nimport {\n  PRODUCT_REGISTER_RESET,\n  PRODUCT_DELETE_RESET,\n} from \"../../constants/product_contants\";\nexport default function ProductListScreen({ history }) {\n  const [actualPage, setActualPage] = useState(1);\n\n  const dispatch = useDispatch();\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n  const [query, setQuery] = useState(\"all\");\n\n  const productRegister = useSelector((state) => state.productRegister);\n  const {\n    loading: loadingCreate,\n    success: successCreate,\n    product: productCreate,\n    error: errorCreate,\n  } = productRegister;\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    message: messageDelete,\n    error: errorDelete,\n  } = productDelete;\n\n  const productList = useSelector((state) => state.productList);\n  const {\n    loading: loadingList,\n    error: errorList,\n    products,\n    pages,\n  } = productList;\n  useEffect(() => {\n    dispatch({ type: PRODUCT_REGISTER_RESET });\n    dispatch({ type: PRODUCT_DELETE_RESET });\n\n    !userInfo ? history.push(\"/\") : dispatch(listProducts(query, actualPage));\n    successCreate &&\n      history.push(`/admin/productos/${productCreate._id}/editar/`);\n  }, [\n    dispatch,\n    history,\n    userInfo,\n    successCreate,\n    productCreate,\n    successDelete,\n    actualPage,\n  ]);\n\n  const createProductHandler = () => {\n    dispatch(registerProduct());\n  };\n\n  const deleteProductHandler = (id) => {\n    window.confirm(\"¿Segur@ de querer eliminar este producto?\") &&\n      dispatch(deleteProduct(id));\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n    if (query == \"\") {\n      setQuery(\"all\");\n      dispatch(listProducts(\"all\", 1));\n    } else {\n      dispatch(listProducts(query, 1));\n    }\n  };\n  return (\n    <Container style={{ marginTop: \"15vh\" }}>\n      <main>\n        <>\n          {loadingDelete && <Loader />}\n          {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n        </>\n        <Row>\n          <Col>\n            <h1>Productos</h1>\n          </Col>\n          <Col className=\"text-right\">\n            <Button className=\"py-3\" onClick={createProductHandler}>\n              <i className=\"fas fa-plus\"></i> Crear producto\n            </Button>\n          </Col>\n        </Row>\n        <Row className=\"mt-4 ml-1\">\n          <Col>\n            <Form inline onSubmit={submitHandler}>\n              <FormControl\n                type=\"text\"\n                placeholder=\"Buscar producto\"\n                onChange={(e) => setQuery(e.target.value)}\n              ></FormControl>\n              <Button type=\"submit\" variant=\"outline-success\">\n                Buscar\n              </Button>\n            </Form>\n          </Col>\n        </Row>\n        <div>\n          {loadingList ? (\n            <Loader />\n          ) : errorList ? (\n            <Message variant=\"danger\">{errorList}</Message>\n          ) : (\n            <Row className=\"w-100 m-0\">\n              {products?.map((product) => (\n                <Col xs={12} className=\"d-flex justify-content-center m-0\">\n                  <ProductPanel product={product}>\n                    <LinkContainer\n                      to={`/admin/productos/${product._id}/editar/`}\n                    >\n                      <Button variant=\"primary\" className=\"btn-sm mr-1\">\n                        <i className=\"fas fa-edit\"></i>\n                      </Button>\n                    </LinkContainer>\n                    <Button\n                      variant=\"danger\"\n                      className=\"btn-sm\"\n                      onClick={() => deleteProductHandler(product._id)}\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </Button>\n                  </ProductPanel>\n                </Col>\n              ))}\n            </Row>\n            // <Table striped bordered hover responsive className=\"table-sm mt-3\">\n            //   <thead>\n            //     <tr>\n            //       <th>ID</th>\n            //       <th>Nombre</th>\n            //       <th>Precio</th>\n            //       <th>Descripción</th>\n            //       <th>¿Esta en stock?</th>\n            //       <th>Categoría</th>\n            //       <th></th>\n            //     </tr>\n            //   </thead>\n            //   <tbody>\n            //     {products?.map((product) => (\n            //       <tr key={product._id}>\n            //         <td>{product._id}</td>\n            //         <td>{product.name}</td>\n            //         <td>${product.price}</td>\n            //         <td>{product.description.substr(0, 10)}</td>\n            //         <td className=\"text-center\">\n            //           {product.inStock == true ? (\n            //             <i\n            //               className=\"fas fa-check\"\n            //               style={{ color: \"green\" }}\n            //             ></i>\n            //           ) : (\n            //             <i className=\"fas fa-times-circle text-danger\"></i>\n            //           )}\n            //         </td>\n            //         <td>{product.categorie[\"name\"]}</td>\n            //         <td>\n            // <LinkContainer\n            //   to={`/admin/productos/${product._id}/editar/`}\n            // >\n            //   <Button variant=\"light\" className=\"btn-sm\">\n            //     <i className=\"fas fa-edit\"></i>\n            //   </Button>\n            // </LinkContainer>\n            // <Button\n            //   variant=\"danger\"\n            //   className=\"btn-sm\"\n            //   onClick={() => deleteProductHandler(product._id)}\n            // >\n            //   <i className=\"fas fa-trash\"></i>\n            // </Button>\n            //         </td>\n            //       </tr>\n            //     ))}\n            //   </tbody>\n            // </Table>\n          )}\n          <Paginator\n            pages={pages}\n            changePage={(value) => setActualPage(value)}\n            pageToSearch={actualPage}\n          ></Paginator>\n        </div>\n      </main>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}