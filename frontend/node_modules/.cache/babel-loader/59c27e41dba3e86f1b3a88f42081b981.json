{"ast":null,"code":"import _slicedToArray from\"C:/Users/dell/Documents/Proyects/Majo Floral Design/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{LinkContainer}from\"react-router-bootstrap\";import{Table,Button,Row,Col,Container}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../../components/Loader\";import Message from\"../../components/Message\";import Paginator from\"../../components/Paginator\";import{listProducts,registerProduct,deleteProduct}from\"../../actions/product_actions\";import{PRODUCT_REGISTER_RESET,PRODUCT_DELETE_RESET}from\"../../constants/product_contants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductListScreen(_ref){var history=_ref.history;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),actualPage=_useState2[0],setActualPage=_useState2[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productRegister=useSelector(function(state){return state.productRegister;});var loadingCreate=productRegister.loading,successCreate=productRegister.success,productCreate=productRegister.product,errorCreate=productRegister.error;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,successDelete=productDelete.success,messageDelete=productDelete.message,errorDelete=productDelete.error;var productList=useSelector(function(state){return state.productList;});var loadingList=productList.loading,errorList=productList.error,products=productList.products,pages=productList.pages;useEffect(function(){dispatch({type:PRODUCT_REGISTER_RESET});dispatch({type:PRODUCT_DELETE_RESET});!userInfo?history.push(\"/\"):dispatch(listProducts(\"all\",actualPage));successCreate&&history.push(\"/admin/productos/\".concat(productCreate._id,\"/editar/\"));},[dispatch,history,userInfo,successCreate,productCreate,successDelete,actualPage]);var createProductHandler=function createProductHandler(){dispatch(registerProduct());};var deleteProductHandler=function deleteProductHandler(id){window.confirm(\"¿Segur@ de querer eliminar este producto?\")&&dispatch(deleteProduct(id));};return/*#__PURE__*/_jsx(Container,{style:{marginTop:\"15vh\"},children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(_Fragment,{children:[loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Productos\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"py-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Crear producto\"]})})]}),/*#__PURE__*/_jsxs(Row,{children:[loadingList?/*#__PURE__*/_jsx(Loader,{}):errorList?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorList}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xBFEsta en stock?\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products===null||products===void 0?void 0:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.description.substr(0,10)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:product.inStock==true?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:\"green\"}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times-circle text-danger\"})}),/*#__PURE__*/_jsx(\"td\",{children:product.categorie[\"name\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/productos/\".concat(product._id,\"/editar/\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteProductHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginator,{pages:pages,changePage:function changePage(value){return setActualPage(value);},pageToSearch:actualPage})]})]})});}","map":{"version":3,"sources":["C:/Users/dell/Documents/Proyects/Majo Floral Design/backend/frontend/src/views/ProductsListScreen/index.js"],"names":["React","useState","useEffect","LinkContainer","Table","Button","Row","Col","Container","useDispatch","useSelector","Loader","Message","Paginator","listProducts","registerProduct","deleteProduct","PRODUCT_REGISTER_RESET","PRODUCT_DELETE_RESET","ProductListScreen","history","actualPage","setActualPage","dispatch","userLogin","state","userInfo","productRegister","loadingCreate","loading","successCreate","success","productCreate","product","errorCreate","error","productDelete","loadingDelete","successDelete","messageDelete","message","errorDelete","productList","loadingList","errorList","products","pages","type","push","_id","createProductHandler","deleteProductHandler","id","window","confirm","marginTop","map","name","price","description","substr","inStock","color","categorie","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { Table, Button, Row, Col, Container } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../../components/Loader\";\r\nimport Message from \"../../components/Message\";\r\nimport Paginator from \"../../components/Paginator\";\r\n\r\nimport {\r\n  listProducts,\r\n  registerProduct,\r\n  deleteProduct,\r\n} from \"../../actions/product_actions\";\r\nimport {\r\n  PRODUCT_REGISTER_RESET,\r\n  PRODUCT_DELETE_RESET,\r\n} from \"../../constants/product_contants\";\r\nexport default function ProductListScreen({ history }) {\r\n  const [actualPage, setActualPage] = useState(1);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const productRegister = useSelector((state) => state.productRegister);\r\n  const {\r\n    loading: loadingCreate,\r\n    success: successCreate,\r\n    product: productCreate,\r\n    error: errorCreate,\r\n  } = productRegister;\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    success: successDelete,\r\n    message: messageDelete,\r\n    error: errorDelete,\r\n  } = productDelete;\r\n\r\n  const productList = useSelector((state) => state.productList);\r\n  const {\r\n    loading: loadingList,\r\n    error: errorList,\r\n    products,\r\n    pages,\r\n  } = productList;\r\n  useEffect(() => {\r\n    dispatch({ type: PRODUCT_REGISTER_RESET });\r\n    dispatch({ type: PRODUCT_DELETE_RESET });\r\n\r\n    !userInfo ? history.push(\"/\") : dispatch(listProducts(\"all\", actualPage));\r\n    successCreate &&\r\n      history.push(`/admin/productos/${productCreate._id}/editar/`);\r\n  }, [\r\n    dispatch,\r\n    history,\r\n    userInfo,\r\n    successCreate,\r\n    productCreate,\r\n    successDelete,\r\n    actualPage,\r\n  ]);\r\n\r\n  const createProductHandler = () => {\r\n    dispatch(registerProduct());\r\n  };\r\n\r\n  const deleteProductHandler = (id) => {\r\n    window.confirm(\"¿Segur@ de querer eliminar este producto?\") &&\r\n      dispatch(deleteProduct(id));\r\n  };\r\n\r\n  return (\r\n    <Container style={{ marginTop: \"15vh\" }}>\r\n      <main>\r\n        <>\r\n          {loadingDelete && <Loader />}\r\n          {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\r\n        </>\r\n        <Row>\r\n          <Col>\r\n            <h1>Productos</h1>\r\n          </Col>\r\n          <Col className=\"text-right\">\r\n            <Button className=\"py-3\" onClick={createProductHandler}>\r\n              <i className=\"fas fa-plus\"></i> Crear producto\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          {loadingList ? (\r\n            <Loader />\r\n          ) : errorList ? (\r\n            <Message variant=\"danger\">{errorList}</Message>\r\n          ) : (\r\n            <Table striped bordered hover responsive className=\"table-sm mt-3\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Nombre</th>\r\n                  <th>Precio</th>\r\n                  <th>Descripción</th>\r\n                  <th>¿Esta en stock?</th>\r\n                  <th>Categoría</th>\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {products?.map((product) => (\r\n                  <tr key={product._id}>\r\n                    <td>{product._id}</td>\r\n                    <td>{product.name}</td>\r\n                    <td>${product.price}</td>\r\n                    <td>{product.description.substr(0, 10)}</td>\r\n                    <td className=\"text-center\">\r\n                      {product.inStock == true ? (\r\n                        <i\r\n                          className=\"fas fa-check\"\r\n                          style={{ color: \"green\" }}\r\n                        ></i>\r\n                      ) : (\r\n                        <i className=\"fas fa-times-circle text-danger\"></i>\r\n                      )}\r\n                    </td>\r\n                    <td>{product.categorie[\"name\"]}</td>\r\n                    <td>\r\n                      <LinkContainer\r\n                        to={`/admin/productos/${product._id}/editar/`}\r\n                      >\r\n                        <Button variant=\"light\" className=\"btn-sm\">\r\n                          <i className=\"fas fa-edit\"></i>\r\n                        </Button>\r\n                      </LinkContainer>\r\n                      <Button\r\n                        variant=\"danger\"\r\n                        className=\"btn-sm\"\r\n                        onClick={() => deleteProductHandler(product._id)}\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          )}\r\n          <Paginator\r\n            pages={pages}\r\n            changePage={(value) => setActualPage(value)}\r\n            pageToSearch={actualPage}\r\n          ></Paginator>\r\n        </Row>\r\n      </main>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}